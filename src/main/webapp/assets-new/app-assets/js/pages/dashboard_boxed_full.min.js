
$(function(){var g=Array.prototype.slice.call(document.querySelectorAll(".switch"));g.forEach(function(n){var o=new Switchery(n,{color:"#4CAF50"})});$(".menu-list").find("li").has("ul").parents(".menu-list").addClass("has-children");$(".has-children").dcDrilldown({defaultText:"Back to parent",saveState:true});$(window).on("resize",function(){setTimeout(function(){if($(window).width()<=768){$(".menu-list").getNiceScroll().remove();$(".menu-list").removeAttr("style").removeAttr("tabindex")}else{$(".menu-list").niceScroll({mousescrollstep:100,cursorcolor:"#ccc",cursorborder:"",cursorwidth:3,hidecursordelay:200,autohidemode:"scroll",railpadding:{right:0.5}})}},200)}).resize();$(".daterange-ranges").daterangepicker({startDate:moment().subtract("days",29),endDate:moment(),minDate:"01/01/2012",maxDate:"12/31/2016",dateLimit:{days:60},ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract("days",1),moment().subtract("days",1)],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},opens:"left",applyClass:"btn-small bg-slate-600 btn-block",cancelClass:"btn-small btn-default btn-block",format:"MM/DD/YYYY"},function(o,n){$(".daterange-ranges span").html(o.format("MMMM D")+" - "+n.format("MMMM D"))});$(".daterange-ranges span").html(moment().subtract("days",29).format("MMMM D")+" - "+moment().format("MMMM D"));$("#reportrange").daterangepicker({startDate:moment().subtract("days",29),endDate:moment(),minDate:"01/01/2014",maxDate:"12/31/2016",dateLimit:{days:60},ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract("days",1),moment().subtract("days",1)],"Last 7 Days":[moment().subtract("days",6),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},opens:"left",buttonClasses:["btn"],applyClass:"btn-small bg-slate btn-block",cancelClass:"btn-small btn-default btn-block",format:"MM/DD/YYYY",separator:" to ",locale:{applyLabel:"Submit",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom Range",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1}},function(o,n){$("#reportrange .daterange-custom-display").html(o.format("<i>D</i> <b><i>MMM</i> <i>YYYY</i></b>")+"<em>&#8211;</em>"+n.format("<i>D</i> <b><i>MMM</i> <i>YYYY</i></b>"))});$("#reportrange .daterange-custom-display").html(moment().subtract("days",29).format("<i>D</i> <b><i>MMM</i> <i>YYYY</i></b>")+"<em>&#8211;</em>"+moment().format("<i>D</i> <b><i>MMM</i> <i>YYYY</i></b>"));f("#traffic-sources",330);function f(p,E){var H=d3.select(p),C={top:5,right:50,bottom:40,left:50},G=H.node().getBoundingClientRect().width-C.left-C.right,E=E-C.top-C.bottom,J=30;var r=H.append("div").attr("class","d3-tip e").style("display","none");var I=d3.time.format("%m/%d/%y %H:%M");var B=d3.time.format("%H:%M");var q=["#03A9F4","#29B6F6","#4FC3F7","#81D4FA","#B3E5FC","#E1F5FE"];var w=d3.time.scale().range([0,G]);var v=d3.scale.linear().range([E,0]);var t=d3.scale.ordinal().range(q);var u=d3.svg.axis().scale(w).orient("bottom").ticks(d3.time.hours,4).innerTickSize(4).tickPadding(8).tickFormat(d3.time.format("%H:%M"));var n=d3.svg.axis().scale(v).ticks(6).innerTickSize(4).outerTickSize(0).tickPadding(8).tickFormat(function(x){return(x/1000)+"k"});var o=n;var M=d3.svg.axis().scale(v).orient("left").ticks(6).tickPadding(8).tickFormat("").tickSize(-G,0,0);var A=H.append("svg");var D=A.attr("width",G+C.left+C.right).attr("height",E+C.top+C.bottom).append("g").attr("transform","translate("+C.left+","+C.top+")");var s=d3.layout.stack().offset("silhouette").values(function(x){return x.values}).x(function(x){return x.date}).y(function(x){return x.value});var L=d3.nest().key(function(x){return x.key});var K=d3.svg.area().interpolate("cardinal").x(function(x){return w(x.date)}).y0(function(x){return v(x.y0)}).y1(function(x){return v(x.y0+x.y)});d3.csv("assets/demo_data/dashboard/traffic_sources.csv",function(S,Q){Q.forEach(function(U){U.date=I.parse(U.date);U.value=+U.value});var P=s(L.entries(Q));w.domain(d3.extent(Q,function(V,U){return V.date}));v.domain([0,d3.max(Q,function(U){return U.y0+U.y})]);D.append("g").attr("class","d3-grid-dashed").call(M);var T=D.append("g").attr("class","streamgraph-layers-group");var R=T.selectAll(".streamgraph-layer").data(P).enter().append("path").attr("class","streamgraph-layer").attr("d",function(U){return K(U.values)}).style("stroke","#fff").style("stroke-width",0.5).style("fill",function(V,U){return t(U)});var x=R.style("opacity",0).transition().duration(750).delay(function(V,U){return U*50}).style("opacity",1);D.append("g").attr("class","d3-axis d3-axis-left d3-axis-solid").call(n.orient("left"));d3.select(D.selectAll(".d3-axis-left .tick text")[0][0]).style("visibility","hidden");D.append("g").attr("class","d3-axis d3-axis-right d3-axis-solid").attr("transform","translate("+G+", 0)").call(o.orient("right"));d3.select(D.selectAll(".d3-axis-right .tick text")[0][0]).style("visibility","hidden");var z=D.append("g").attr("class","d3-axis d3-axis-horizontal d3-axis-solid").attr("transform","translate(0,"+E+")").call(u);z.selectAll(".d3-axis-subticks").data(w.ticks(d3.time.hours),function(U){return U}).enter().append("line").attr("class","d3-axis-subticks").attr("y1",0).attr("y2",4).attr("x1",w).attr("x2",w);var y=T.append("g").attr("class","hover-line");var O=y.append("line").attr("y1",0).attr("y2",E).style("fill","none").style("stroke","#fff").style("stroke-width",1).style("pointer-events","none").style("shape-rendering","crispEdges").style("opacity",0);var N=y.append("rect").attr("x",2).attr("y",2).attr("width",6).attr("height",6).style("fill","#03A9F4").style("stroke","#fff").style("stroke-width",1).style("shape-rendering","crispEdges").style("pointer-events","none").style("opacity",0);x.each("end",function(){R.on("mouseover",function(V,U){D.selectAll(".streamgraph-layer").transition().duration(250).style("opacity",function(X,W){return W!=U?0.75:1})}).on("mousemove",function(Y,W){mouse=d3.mouse(this);mousex=mouse[0];mousey=mouse[1];datearray=[];var U=w.invert(mousex);U=U.getHours();var X=(Y.values);for(var V=0;V<X.length;V++){datearray[V]=X[V].date;datearray[V]=datearray[V].getHours()}mousedate=datearray.indexOf(U);pro=Y.values[mousedate].value;N.attr("x",mousex-3).attr("y",mousey-6).style("opacity",1);O.attr("x1",mousex).attr("x2",mousex).style("opacity",1);r.html("<ul class='list-unstyled mb-5'><li><div class='text-size-base mt-5 mb-5'><i class='icon-circle-left2 position-left'></i>"+Y.key+"</div></li><li>Visits: &nbsp;<span class='text-semibold pull-right'>"+pro+"</span></li><li>Time: &nbsp; <span class='text-semibold pull-right'>"+B(Y.values[mousedate].date)+"</span></li></ul>").style("display","block");r.append("div").attr("class","d3-tip-arrow")}).on("mouseout",function(V,U){D.selectAll(".streamgraph-layer").transition().duration(250).style("opacity",1);N.style("opacity",0);r.style("display","none");O.style("opacity",0)})});H.on("mousemove",function(V,U){mouse=d3.mouse(this);mousex=mouse[0];mousey=mouse[1];r.style("top",(mousey-($(".d3-tip").outerHeight()/2))-2+"px");if(mousex>=($(p).outerWidth()-$(".d3-tip").outerWidth()-C.right-(J*2))){r.style("left",(mousex-$(".d3-tip").outerWidth()-J)+"px").attr("class","d3-tip w")}else{r.style("left",(mousex+J)+"px").attr("class","d3-tip e")}})});$(window).on("resize",F);$(".sidebar-control").on("click",F);function F(){G=H.node().getBoundingClientRect().width-C.left-C.right;A.attr("width",G+C.left+C.right);D.attr("width",G+C.left+C.right);w.range([0,G]);D.selectAll(".d3-axis-horizontal").call(u);D.selectAll(".d3-axis-subticks").attr("x1",w).attr("x2",w);D.selectAll(".d3-grid-dashed").call(M.tickSize(-G,0,0));D.selectAll(".d3-axis-right").attr("transform","translate("+G+", 0)");D.selectAll(".streamgraph-layer").attr("d",function(x){return K(x.values)})}}e("#app_sales",255);function e(w,z){var r=d3.select(w),v={top:5,right:30,bottom:30,left:50},q=r.node().getBoundingClientRect().width-v.left-v.right,z=z-v.top-v.bottom;var C=d3.tip().attr("class","d3-tip").html(function(D){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mt-5 mb-5'><i class='icon-circle-left2 position-left'></i>"+D.name+" app</div></li><li>Sales: &nbsp;<span class='text-semibold pull-right'>"+D.value+"</span></li><li>Revenue: &nbsp; <span class='text-semibold pull-right'>$"+(D.value*25).toFixed(2)+"</span></li></ul>"});var p=d3.time.format("%Y/%m/%d").parse,B=d3.time.format("%b %d, '%y");var t=["#4CAF50","#FF5722","#5C6BC0"],u=d3.scale.ordinal().range(t);var o=r.append("svg");var x=o.attr("width",q+v.left+v.right).attr("height",z+v.top+v.bottom).append("g").attr("transform","translate("+v.left+","+v.top+")").call(C);var s=$("#select_date").multiselect({buttonClass:"btn btn-link text-semibold",enableHTML:true,dropRight:true,onChange:function(){y(),$.uniform.update()},buttonText:function(D,E){var F="";D.each(function(){F+=$(this).html()+", "});return'<span class="status-mark border-warning position-left"></span>'+F.substr(0,F.length-2)}});$(".multiselect-container input").uniform({radioClass:"choice"});d3.csv("assets/demo_data/dashboard/app_sales.csv",function(D,E){formatted=E;A()});var n;d3.select(window).on("keydown",function(){n=d3.event.altKey}).on("keyup",function(){n=false});function y(){d3.transition().duration(n?7500:500).each(A)}function A(){var K=d3.nest().key(function(R){return R.type}).map(formatted);var I=s.val();var H=K[I];u.domain(d3.keys(H[0]).filter(function(R){return(R!=="date"&&R!=="type")}));var N=u.domain().map(function(R){return{name:R,values:H.map(function(S){return{name:R,date:p(S.date),value:parseFloat(S[R],10)}})}});var Q=d3.svg.line().x(function(R){return M(R.date)}).y(function(R){return L(R.value)}).interpolate("cardinal");var M=d3.time.scale().domain([d3.min(N,function(R){return d3.min(R.values,function(S){return S.date})}),d3.max(N,function(R){return d3.max(R.values,function(S){return S.date})})]).range([0,q]);var L=d3.scale.linear().domain([d3.min(N,function(R){return d3.min(R.values,function(S){return S.value})}),d3.max(N,function(R){return d3.max(R.values,function(S){return S.value})})]).range([z,0]);var E=d3.svg.axis().scale(M).orient("bottom").tickPadding(8).ticks(d3.time.days).innerTickSize(4).tickFormat(d3.time.format("%a"));var D=d3.svg.axis().scale(L).orient("left").ticks(6).tickSize(0-q).tickPadding(8);x.append("g").attr("class","d3-axis d3-axis-horizontal d3-axis-solid").attr("transform","translate(0,"+z+")");x.append("g").attr("class","d3-axis d3-axis-vertical d3-axis-transparent");var P=x.selectAll(".lines").data(N);var F=P.enter().append("g").attr("class","lines").attr("id",function(R){return R.name+"-line"});F.append("path").attr("class","d3-line d3-line-medium").style("stroke",function(R){return u(R.name)}).style("opacity",0).attr("d",function(R){return Q(R.values[0])}).transition().duration(500).delay(function(S,R){return R*200}).style("opacity",1);var J=P.selectAll("circle").data(function(R){return R.values}).enter().append("circle").attr("class","d3-line-circle d3-line-circle-medium").attr("cx",function(S,R){return M(S.date)}).attr("cy",function(S,R){return L(S.value)}).attr("r",3).style("fill","#fff").style("stroke",function(R){return u(R.name)});J.style("opacity",0).transition().duration(500).delay(500).style("opacity",1);J.on("mouseover",function(R){C.offset([-15,0]).show(R);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(R){C.hide(R);d3.select(this).transition().duration(250).attr("r",3)});P.each(function(R){d3.select(d3.select(this).selectAll("circle")[0][0]).on("mouseover",function(S){C.offset([0,15]).direction("e").show(S);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(S){C.direction("n").hide(S);d3.select(this).transition().duration(250).attr("r",3)})});P.each(function(R){d3.select(d3.select(this).selectAll("circle")[0][d3.select(this).selectAll("circle").size()-1]).on("mouseover",function(S){C.offset([0,-15]).direction("w").show(S);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(S){C.direction("n").hide(S);d3.select(this).transition().duration(250).attr("r",3)})});var G=d3.transition(P);G.select("path").attr("d",function(S,R){return Q(S.values)});G.selectAll("circle").attr("cy",function(S,R){return L(S.value)}).attr("cx",function(S,R){return M(S.date)});d3.transition(x).select(".d3-axis-vertical").call(D);d3.transition(x).select(".d3-axis-horizontal").attr("transform","translate(0,"+z+")").call(E);$(window).on("resize",O);$(".sidebar-control").on("click",O);function O(){q=r.node().getBoundingClientRect().width-v.left-v.right;o.attr("width",q+v.left+v.right);x.attr("width",q+v.left+v.right);M.range([0,q]);L.range([z,0]);x.select(".d3-axis-horizontal").call(E);x.select(".d3-axis-vertical").call(D.tickSize(0-q));x.selectAll(".d3-line").attr("d",function(S,R){return Q(S.values)});x.selectAll(".d3-line-circle").attr("cx",function(S,R){return M(S.date)})}}}h("#monthly-sales-stats",100,"#4DB6AC");function h(v,C,u){var r=d3.select(v),t={top:20,right:35,bottom:40,left:35},q=r.node().getBoundingClientRect().width-t.left-t.right,C=C-t.top-t.bottom;var o=d3.time.format("%Y-%m-%d").parse,B=d3.bisector(function(x){return x.date}).left,D=d3.time.format("%b %d");var n=r.append("svg");var w=n.attr("width",q+t.left+t.right).attr("height",C+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")");var p=d3.svg.area().x(function(x){return A(x.date)}).y0(C).y1(function(x){return z(x.value)}).interpolate("monotone");var A=d3.time.scale().range([0,q]);var z=d3.scale.linear().range([C,0]);var s=d3.svg.axis().scale(A).orient("bottom").ticks(d3.time.days,6).innerTickSize(4).tickPadding(8).tickFormat(d3.time.format("%b %d"));d3.json("assets/demo_data/dashboard/monthly_sales.json",function(J,F){if(J){return console.error(J)}F.forEach(function(M){M.date=o(M.date);M.value=+M.value});var x=d3.max(F,function(M){return M.value});var E=F.map(function(M){return{date:M.date,value:0}});A.domain(d3.extent(F,function(N,M){return N.date}));z.domain([0,d3.max(F,function(M){return M.value})]);var K=w.append("g").attr("class","d3-axis d3-axis-horizontal d3-axis-solid").attr("transform","translate(0,"+C+")").call(s);K.selectAll(".d3-axis-subticks").data(A.ticks(d3.time.days),function(M){return M}).enter().append("line").attr("class","d3-axis-subticks").attr("y1",0).attr("y2",4).attr("x1",A).attr("x2",A);w.append("path").datum(F).attr("class","d3-area").attr("d",p).style("fill",u).transition().duration(1000).attrTween("d",function(){var M=d3.interpolateArray(E,F);return function(N){return p(M(N))}});var y=w.append("g").attr("class","d3-crosshair-line").style("display","none");y.append("line").attr("class","vertical-crosshair").attr("y1",0).attr("y2",-x).style("stroke","#e5e5e5").style("shape-rendering","crispEdges");var I=w.append("g").attr("class","d3-crosshair-pointer").style("display","none");I.append("circle").attr("r",3).style("fill","#fff").style("stroke",u).style("stroke-width",1);var L=w.append("g").attr("class","d3-crosshair-text").style("display","none");L.append("text").attr("dy",-10).style("font-size",12);w.append("rect").attr("class","d3-crosshair-overlay").style("fill","none").style("pointer-events","all").attr("width",q).attr("height",C).on("mouseover",function(){I.style("display",null);y.style("display",null);L.style("display",null)}).on("mouseout",function(){I.style("display","none");y.style("display","none");L.style("display","none")}).on("mousemove",H);function H(){var M=d3.mouse(this),Q=M[0],P=M[1],O=A.invert(Q),N=B(F,O),S=F[N-1],R=F[N],T=O-S.date>R.date-O?R:S;y.attr("transform","translate("+A(T.date)+","+C+")");I.attr("transform","translate("+A(T.date)+","+z(T.value)+")");if(Q>=(r.node().getBoundingClientRect().width-L.select("text").node().getBoundingClientRect().width-t.right-t.left)){L.select("text").attr("text-anchor","end").attr("x",function(){return(A(T.date)-15)+"px"}).text(D(T.date)+" - "+T.value+" sales")}else{L.select("text").attr("text-anchor","start").attr("x",function(){return(A(T.date)+15)+"px"}).text(D(T.date)+" - "+T.value+" sales")}}$(window).on("resize",G);$(".sidebar-control").on("click",G);function G(){q=r.node().getBoundingClientRect().width-t.left-t.right;n.attr("width",q+t.left+t.right);w.attr("width",q+t.left+t.right);A.range([0,q]);w.selectAll(".d3-axis-horizontal").call(s);w.selectAll(".d3-axis-subticks").attr("x1",A).attr("x2",A);w.selectAll(".d3-area").datum(F).attr("d",p);w.selectAll(".d3-crosshair-overlay").attr("width",q)}})}m("#messages-stats",40,"#5C6BC0");function m(u,A,t){var r=d3.select(u),s={top:0,right:0,bottom:0,left:0},q=r.node().getBoundingClientRect().width-s.left-s.right,A=A-s.top-s.bottom;var n=d3.time.format("%Y-%m-%d").parse;var o=r.append("svg");var v=o.attr("width",q+s.left+s.right).attr("height",A+s.top+s.bottom).append("g").attr("transform","translate("+s.left+","+s.top+")");var p=d3.svg.area().x(function(x){return z(x.date)}).y0(A).y1(function(x){return w(x.value)}).interpolate("monotone");var z=d3.time.scale().range([0,q]);var w=d3.scale.linear().range([A,0]);d3.json("assets/demo_data/dashboard/monthly_sales.json",function(x,D){if(x){return console.error(x)}D.forEach(function(E){E.date=n(E.date);E.value=+E.value});var C=d3.max(D,function(E){return E.value});var B=D.map(function(E){return{date:E.date,value:0}});z.domain(d3.extent(D,function(F,E){return F.date}));w.domain([0,d3.max(D,function(E){return E.value})]);v.append("path").datum(D).attr("class","d3-area").style("fill",t).attr("d",p).transition().duration(1000).attrTween("d",function(){var E=d3.interpolateArray(B,D);return function(F){return p(E(F))}});$(window).on("resize",y);$(".sidebar-control").on("click",y);function y(){q=r.node().getBoundingClientRect().width-s.left-s.right;o.attr("width",q+s.left+s.right);v.attr("width",q+s.left+s.right);z.range([0,q]);v.selectAll(".d3-area").datum(D).attr("d",p)}})}l("#new-visitors","line",30,35,"basis",750,2000,"#26A69A");l("#new-sessions","line",30,35,"basis",750,2000,"#FF7043");l("#total-online","line",30,35,"basis",750,2000,"#5C6BC0");l("#server-load","area",30,50,"basis",750,2000,"rgba(255,255,255,0.5)");function l(o,p,r,C,w,n,K,F){var G=d3.select(o),A={top:0,right:0,bottom:0,left:0},E=G.node().getBoundingClientRect().width-A.left-A.right,C=C-A.top-A.bottom;var M=[];for(var H=0;H<r;H++){M.push(Math.floor(Math.random()*r)+5)}var t=d3.scale.linear().range([0,E]);var s=d3.scale.linear().range([C-5,5]);t.domain([1,r-3]);s.domain([0,r]);var u=d3.svg.line().interpolate(w).x(function(y,x){return t(x)}).y(function(y,x){return s(y)});var I=d3.svg.area().interpolate(w).x(function(y,x){return t(x)}).y0(C).y1(function(x){return s(x)});var v=G.append("svg");var B=v.attr("width",E+A.left+A.right).attr("height",C+A.top+A.bottom).append("g").attr("transform","translate("+A.left+","+A.top+")");var J=B.append("defs").append("clipPath").attr("id",function(y,x){return"load-clip-"+o.substring(1)});var L=J.append("rect").attr("class","load-clip").attr("width",0).attr("height",C);L.transition().duration(1000).ease("linear").attr("width",E);var D=B.append("g").attr("clip-path",function(y,x){return"url(#load-clip-"+o.substring(1)+")"}).append("path").datum(M).attr("transform","translate("+t(0)+",0)");if(p=="area"){D.attr("d",I).attr("class","d3-area").style("fill",F)}else{D.attr("d",u).attr("class","d3-line d3-line-medium").style("stroke",F)}D.style("opacity",0).transition().duration(750).style("opacity",1);setInterval(function(){M.push(Math.floor(Math.random()*r)+5);M.shift();q()},K);function q(){D.attr("transform",null).transition().duration(n).ease("linear").attr("transform","translate("+t(0)+",0)");if(p=="area"){D.attr("d",I).attr("class","d3-area").style("fill",F)}else{D.attr("d",u).attr("class","d3-line d3-line-medium").style("stroke",F)}}$(window).on("resize",z);$(".sidebar-control").on("click",z);function z(){E=G.node().getBoundingClientRect().width-A.left-A.right;v.attr("width",E+A.left+A.right);B.attr("width",E+A.left+A.right);t.range([0,E]);L.attr("width",E);B.select(".d3-line").attr("d",u);B.select(".d3-area").attr("d",I)}}k("#today-revenue",50);function k(n,A){var s=[{date:"04/13/14",alpha:"60"},{date:"04/14/14",alpha:"35"},{date:"04/15/14",alpha:"65"},{date:"04/16/14",alpha:"50"},{date:"04/17/14",alpha:"65"},{date:"04/18/14",alpha:"20"},{date:"04/19/14",alpha:"60"}];var F=d3.select(n),z={top:0,right:0,bottom:0,left:0},D=F.node().getBoundingClientRect().width-z.left-z.right,A=A-z.top-z.bottom,w=20;var J=d3.time.format("%m/%d/%y").parse,v=d3.time.format("%a, %B %e");var p=d3.tip().attr("class","d3-tip").html(function(x){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mt-5 mb-5'><i class='icon-check2 position-left'></i>"+v(x.date)+"</div></li><li>Sales: &nbsp;<span class='text-semibold pull-right'>"+x.alpha+"</span></li><li>Revenue: &nbsp; <span class='text-semibold pull-right'>$"+(x.alpha*25).toFixed(2)+"</span></li></ul>"});var u=F.append("svg");var B=u.attr("width",D+z.left+z.right).attr("height",A+z.top+z.bottom).append("g").attr("transform","translate("+z.left+","+z.top+")").call(p);s.forEach(function(x){x.date=J(x.date);x.alpha=+x.alpha});var r=d3.time.scale().range([w,D-w]);var q=d3.scale.linear().range([A,5]);r.domain(d3.extent(s,function(x){return x.date}));q.domain([0,d3.max(s,function(x){return Math.max(x.alpha)})]);var t=d3.svg.line().x(function(x){return r(x.date)}).y(function(x){return q(x.alpha)});var H=B.append("defs").append("clipPath").attr("id","clip-line-small");var E=H.append("rect").attr("class","clip").attr("width",0).attr("height",A);E.transition().duration(1000).ease("linear").attr("width",D);var C=B.append("path").attr({d:t(s),"clip-path":"url(#clip-line-small)","class":"d3-line d3-line-medium"}).style("stroke","#fff");B.select(".line-tickets").transition().duration(1000).ease("linear");var I=B.append("g").selectAll(".d3-line-guides-group").data(s);I.enter().append("line").attr("class","d3-line-guides").attr("x1",function(y,x){return r(y.date)}).attr("y1",function(y,x){return A}).attr("x2",function(y,x){return r(y.date)}).attr("y2",function(y,x){return A}).style("stroke","rgba(255,255,255,0.3)").style("stroke-dasharray","4,2").style("shape-rendering","crispEdges");I.transition().duration(1000).delay(function(y,x){return x*150}).attr("y2",function(y,x){return q(y.alpha)});var G=B.insert("g").selectAll(".d3-line-circle").data(s).enter().append("circle").attr("class","d3-line-circle d3-line-circle-medium").attr("cx",t.x()).attr("cy",t.y()).attr("r",3).style("stroke","#fff").style("fill","#607D8B");G.style("opacity",0).transition().duration(250).ease("linear").delay(1000).style("opacity",1);G.on("mouseover",function(x){p.offset([-10,0]).show(x);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(x){p.hide(x);d3.select(this).transition().duration(250).attr("r",3)});d3.select(G[0][0]).on("mouseover",function(x){p.offset([0,10]).direction("e").show(x);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(x){p.direction("n").hide(x);d3.select(this).transition().duration(250).attr("r",3)});d3.select(G[0][G.size()-1]).on("mouseover",function(x){p.offset([0,-10]).direction("w").show(x);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(x){p.direction("n").hide(x);d3.select(this).transition().duration(250).attr("r",3)});$(window).on("resize",o);$(".sidebar-control").on("click",o);function o(){D=F.node().getBoundingClientRect().width-z.left-z.right;u.attr("width",D+z.left+z.right);B.attr("width",D+z.left+z.right);r.range([w,D-w]);E.attr("width",D);B.selectAll(".d3-line").attr("d",t(s));B.selectAll(".d3-line-circle").attr("cx",t.x());B.selectAll(".d3-line-guides").attr("x1",function(y,x){return r(y.date)}).attr("x2",function(y,x){return r(y.date)})}}i("#today-progress",20,20,"#7986CB");i("#yesterday-progress",20,20,"#7986CB");function i(v,q,C,u){var r=d3.select(v),t=2,y=Math.min(q/2,C/2)-t,z=2*Math.PI,n=$(v).data("progress"),B=100;var p=d3.svg.arc().startAngle(0).innerRadius(0).outerRadius(y).endAngle(function(D){return(D.value/D.size)*2*Math.PI});var o=r.append("svg");var w=o.attr("width",q).attr("height",C).append("g").attr("transform","translate("+q/2+","+C/2+")");var s=w.append("g").attr("class","progress-meter");s.append("path").attr("d",p.endAngle(z)).style("fill","#fff").style("stroke",u).style("stroke-width",1.5);var A=s.append("path").style("fill",u);A.transition().ease("cubic-out").duration(2500).attrTween("d",x);function x(){var D=d3.interpolate(0,n);return function(F){var G=n/(100/F);var E=p.endAngle(z*(G));return p(D(E))}}}d("#campaigns-donut",42);function d(u,A){var t=[{browser:"Google Adwords",icon:"<i class='icon-google position-left'></i>",value:1047,color:"#66BB6A"},{browser:"Social media",icon:"<i class='icon-share4 position-left'></i>",value:2948,color:"#9575CD"},{browser:"Youtube video",icon:"<i class='icon-youtube position-left'></i>",value:3909,color:"#FF7043"}];var q=d3.select(u),o=2,y=(A/2)-o,x=d3.sum(t,function(B){return B.value});var z=d3.tip().attr("class","d3-tip").offset([-10,0]).direction("e").html(function(B){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mb-5 mt-5'>"+B.data.icon+B.data.browser+"</div></li><li>Visits: &nbsp;<span class='text-semibold pull-right'>"+B.value+"</span></li><li>Share: &nbsp;<span class='text-semibold pull-right'>"+(100/(x/B.value)).toFixed(2)+"%</span></li></ul>"});var n=q.append("svg").call(z);var v=n.attr("width",A).attr("height",A).append("g").attr("transform","translate("+(A/2)+","+(A/2)+")");var s=d3.layout.pie().sort(null).startAngle(Math.PI).endAngle(3*Math.PI).value(function(B){return B.value});var p=d3.svg.arc().outerRadius(y).innerRadius(y/2);var w=v.selectAll(".d3-arc").data(s(t)).enter().append("g").attr("class","d3-arc").style("stroke","#fff").style("cursor","pointer");var r=w.append("path").style("fill",function(B){return B.data.color});r.on("mouseover",function(C,B){d3.select(this).transition().duration(500).ease("elastic").attr("transform",function(E){E.midAngle=((E.endAngle-E.startAngle)/2)+E.startAngle;var D=Math.sin(E.midAngle)*o;var F=-Math.cos(E.midAngle)*o;return"translate("+D+","+F+")"})}).on("mousemove",function(B){z.show(B).style("top",(d3.event.pageY-40)+"px").style("left",(d3.event.pageX+30)+"px")}).on("mouseout",function(C,B){d3.select(this).transition().duration(500).ease("bounce").attr("transform","translate(0,0)");z.hide(C)});r.transition().delay(function(C,B){return B*500}).duration(500).attrTween("d",function(C){var B=d3.interpolate(C.startAngle,C.endAngle);return function(D){C.endAngle=B(D);return p(C)}})}b("#campaign-status-pie",42);function b(u,A){var t=[{status:"Active campaigns",icon:"<span class='status-mark border-blue-300 position-left'></span>",value:439,color:"#29B6F6"},{status:"Closed campaigns",icon:"<span class='status-mark border-danger-300 position-left'></span>",value:290,color:"#EF5350"},{status:"Pending campaigns",icon:"<span class='status-mark border-success-300 position-left'></span>",value:190,color:"#81C784"},{status:"Campaigns on hold",icon:"<span class='status-mark border-grey-300 position-left'></span>",value:148,color:"#999"}];var q=d3.select(u),o=2,y=(A/2)-o,x=d3.sum(t,function(B){return B.value});var z=d3.tip().attr("class","d3-tip").offset([-10,0]).direction("e").html(function(B){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mb-5 mt-5'>"+B.data.icon+B.data.status+"</div></li><li>Total: &nbsp;<span class='text-semibold pull-right'>"+B.value+"</span></li><li>Share: &nbsp;<span class='text-semibold pull-right'>"+(100/(x/B.value)).toFixed(2)+"%</span></li></ul>"});var n=q.append("svg").call(z);var v=n.attr("width",A).attr("height",A).append("g").attr("transform","translate("+(A/2)+","+(A/2)+")");var s=d3.layout.pie().sort(null).startAngle(Math.PI).endAngle(3*Math.PI).value(function(B){return B.value});var p=d3.svg.arc().outerRadius(y).innerRadius(y/2);var w=v.selectAll(".d3-arc").data(s(t)).enter().append("g").attr("class","d3-arc").style("stroke","#fff").style("cursor","pointer");var r=w.append("path").style("fill",function(B){return B.data.color});r.on("mouseover",function(C,B){d3.select(this).transition().duration(500).ease("elastic").attr("transform",function(E){E.midAngle=((E.endAngle-E.startAngle)/2)+E.startAngle;var D=Math.sin(E.midAngle)*o;var F=-Math.cos(E.midAngle)*o;return"translate("+D+","+F+")"})}).on("mousemove",function(B){z.show(B).style("top",(d3.event.pageY-40)+"px").style("left",(d3.event.pageX+30)+"px")}).on("mouseout",function(C,B){d3.select(this).transition().duration(500).ease("bounce").attr("transform","translate(0,0)");z.hide(C)});r.transition().delay(function(C,B){return B*500}).duration(500).attrTween("d",function(C){var B=d3.interpolate(C.startAngle,C.endAngle);return function(D){C.endAngle=B(D);return p(C)}})}c("#tickets-status",42);function c(u,A){var t=[{status:"Pending tickets",icon:"<i class='status-mark border-blue-300 position-left'></i>",value:295,color:"#29B6F6"},{status:"Resolved tickets",icon:"<i class='status-mark border-success-300 position-left'></i>",value:189,color:"#66BB6A"},{status:"Closed tickets",icon:"<i class='status-mark border-danger-300 position-left'></i>",value:277,color:"#EF5350"}];var q=d3.select(u),o=2,y=(A/2)-o,x=d3.sum(t,function(B){return B.value});var z=d3.tip().attr("class","d3-tip").offset([-10,0]).direction("e").html(function(B){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mb-5 mt-5'>"+B.data.icon+B.data.status+"</div></li><li>Total: &nbsp;<span class='text-semibold pull-right'>"+B.value+"</span></li><li>Share: &nbsp;<span class='text-semibold pull-right'>"+(100/(x/B.value)).toFixed(2)+"%</span></li></ul>"});var n=q.append("svg").call(z);var v=n.attr("width",A).attr("height",A).append("g").attr("transform","translate("+(A/2)+","+(A/2)+")");var s=d3.layout.pie().sort(null).startAngle(Math.PI).endAngle(3*Math.PI).value(function(B){return B.value});var p=d3.svg.arc().outerRadius(y).innerRadius(y/2);var w=v.selectAll(".d3-arc").data(s(t)).enter().append("g").attr("class","d3-arc").style("stroke","#fff").style("cursor","pointer");var r=w.append("path").style("fill",function(B){return B.data.color});r.on("mouseover",function(C,B){d3.select(this).transition().duration(500).ease("elastic").attr("transform",function(E){E.midAngle=((E.endAngle-E.startAngle)/2)+E.startAngle;var D=Math.sin(E.midAngle)*o;var F=-Math.cos(E.midAngle)*o;return"translate("+D+","+F+")"})}).on("mousemove",function(B){z.show(B).style("top",(d3.event.pageY-40)+"px").style("left",(d3.event.pageX+30)+"px")}).on("mouseout",function(C,B){d3.select(this).transition().duration(500).ease("bounce").attr("transform","translate(0,0)");z.hide(C)});r.transition().delay(function(C,B){return B*500}).duration(500).attrTween("d",function(C){var B=d3.interpolate(C.startAngle,C.endAngle);return function(D){C.endAngle=B(D);return p(C)}})}a("#hours-available-bars",24,40,true,"elastic",1200,50,"#EC407A","hours");a("#goal-bars",24,40,true,"elastic",1200,50,"#5C6BC0","goal");a("#members-online",24,50,true,"elastic",1200,50,"rgba(255,255,255,0.5)","members");function a(q,v,A,s,D,n,K,F,r){var I=[];for(var H=0;H<v;H++){I.push(Math.round(Math.random()*10)+10)}var G=d3.select(q),E=G.node().getBoundingClientRect().width;var u=d3.scale.ordinal().rangeBands([0,E],0.3);var t=d3.scale.linear().range([0,A]);u.domain(d3.range(0,I.length));t.domain([0,d3.max(I)]);var w=G.append("svg");var B=w.attr("width",E).attr("height",A).append("g");var C=B.selectAll("rect").data(I).enter().append("rect").attr("class","d3-random-bars").attr("width",u.rangeBand()).attr("x",function(y,x){return u(x)}).style("fill",F);var z=d3.tip().attr("class","d3-tip").offset([-10,0]);if(r=="hours"||r=="goal"||r=="members"){C.call(z).on("mouseover",z.show).on("mouseout",z.hide)}if(r=="hours"){z.html(function(y,x){return"<div class='text-center'><h6 class='no-margin'>"+y+"</h6><span class='text-size-small'>meetings</span><div class='text-size-small'>"+x+":00</div></div>"})}if(r=="goal"){z.html(function(y,x){return"<div class='text-center'><h6 class='no-margin'>"+y+"</h6><span class='text-size-small'>statements</span><div class='text-size-small'>"+x+":00</div></div>"})}if(r=="members"){z.html(function(y,x){return"<div class='text-center'><h6 class='no-margin'>"+y+"0</h6><span class='text-size-small'>members</span><div class='text-size-small'>"+x+":00</div></div>"})}if(s){J()}else{o()}function J(){C.attr("height",0).attr("y",A).transition().attr("height",function(x){return t(x)}).attr("y",function(x){return A-t(x)}).delay(function(y,x){return x*K}).duration(n).ease(D)}function o(){C.attr("height",function(x){return t(x)}).attr("y",function(x){return A-t(x)})}$(window).on("resize",p);$(".sidebar-control").on("click",p);function p(){E=G.node().getBoundingClientRect().width;w.attr("width",E);B.attr("width",E);u.rangeBands([0,E],0.3);B.selectAll(".d3-random-bars").attr("width",u.rangeBand()).attr("x",function(y,x){return u(x)})}}j("#hours-available-progress",38,2,"#F06292",0.68,"icon-watch text-pink-400","Hours available","64% average");j("#goal-progress",38,2,"#5C6BC0",0.82,"icon-trophy3 text-indigo-400","Productivity goal","87% average");function j(p,r,G,H,q,n,B,y){var I=d3.select(p),M=0,L=32,v=q,F=Math.PI*2,J=d3.format(".0%"),E=r*2;var x=Math.abs((v-M)/0.01);var w=v<M?-0.01:0.01;var C=I.append("svg");var D=C.attr("width",E).attr("height",E).append("g").attr("transform","translate("+(E/2)+","+(E/2)+")");var z=d3.svg.arc().startAngle(0).innerRadius(r).outerRadius(r-G);D.append("path").attr("class","d3-progress-background").attr("d",z.endAngle(F)).style("fill","#eee");var o=D.append("path").attr("class","d3-progress-foreground").attr("filter","url(#blur)").style("fill",H).style("stroke",H);var u=D.append("path").attr("class","d3-progress-front").style("fill",H).style("fill-opacity",1);var K=d3.select(p).append("h2").attr("class","mt-15 mb-5");d3.select(p).append("i").attr("class",n+" counter-icon").attr("style","top: "+((E-L)/2)+"px");d3.select(p).append("div").text(B);d3.select(p).append("div").attr("class","text-size-small text-muted").text(y);function A(N){o.attr("d",z.endAngle(F*N));u.attr("d",z.endAngle(F*N));K.text(J(N))}var t=M;(function s(){A(t);if(x>0){x--;t+=w;setTimeout(s,10)}})()}$(".table tr").each(function(o){var q=$(this).find(".letter-icon-title"),p=q.eq(0).text().charAt(0).toUpperCase();var n=$(this).find(".letter-icon");n.eq(0).text(p)})});