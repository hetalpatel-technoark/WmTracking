
$(function(){var h=Array.prototype.slice.call(document.querySelectorAll(".switch"));h.forEach(function(p){var q=new Switchery(p,{color:"#4CAF50"})});$(".daterange-ranges").daterangepicker({startDate:moment().subtract("days",29),endDate:moment(),minDate:"01/01/2012",maxDate:"12/31/2016",dateLimit:{days:60},ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract("days",1),moment().subtract("days",1)],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},opens:"left",applyClass:"btn-small bg-slate-600 btn-block",cancelClass:"btn-small btn-default btn-block",format:"MM/DD/YYYY"},function(q,p){$(".daterange-ranges span").html(q.format("MMMM D")+" - "+p.format("MMMM D"))});$(".daterange-ranges span").html(moment().subtract("days",29).format("MMMM D")+" - "+moment().format("MMMM D"));g("#traffic-sources",330);function g(r,G){var J=d3.select(r),E={top:5,right:50,bottom:40,left:50},I=J.node().getBoundingClientRect().width-E.left-E.right,G=G-E.top-E.bottom,L=30;var t=J.append("div").attr("class","d3-tip e").style("display","none");var K=d3.time.format("%m/%d/%y %H:%M");var D=d3.time.format("%H:%M");var s=["#03A9F4","#29B6F6","#4FC3F7","#81D4FA","#B3E5FC","#E1F5FE"];var B=d3.time.scale().range([0,I]);var A=d3.scale.linear().range([G,0]);var v=d3.scale.ordinal().range(s);var w=d3.svg.axis().scale(B).orient("bottom").ticks(d3.time.hours,4).innerTickSize(4).tickPadding(8).tickFormat(d3.time.format("%H:%M"));var p=d3.svg.axis().scale(A).ticks(6).innerTickSize(4).outerTickSize(0).tickPadding(8).tickFormat(function(x){return(x/1000)+"k"});var q=p;var O=d3.svg.axis().scale(A).orient("left").ticks(6).tickPadding(8).tickFormat("").tickSize(-I,0,0);var C=J.append("svg");var F=C.attr("width",I+E.left+E.right).attr("height",G+E.top+E.bottom).append("g").attr("transform","translate("+E.left+","+E.top+")");var u=d3.layout.stack().offset("silhouette").values(function(x){return x.values}).x(function(x){return x.date}).y(function(x){return x.value});var N=d3.nest().key(function(x){return x.key});var M=d3.svg.area().interpolate("cardinal").x(function(x){return B(x.date)}).y0(function(x){return A(x.y0)}).y1(function(x){return A(x.y0+x.y)});d3.csv("assets/demo_data/dashboard/traffic_sources.csv",function(U,S){S.forEach(function(W){W.date=K.parse(W.date);W.value=+W.value});var R=u(N.entries(S));B.domain(d3.extent(S,function(X,W){return X.date}));A.domain([0,d3.max(S,function(W){return W.y0+W.y})]);F.append("g").attr("class","d3-grid-dashed").call(O);var V=F.append("g").attr("class","streamgraph-layers-group");var T=V.selectAll(".streamgraph-layer").data(R).enter().append("path").attr("class","streamgraph-layer").attr("d",function(W){return M(W.values)}).style("stroke","#fff").style("stroke-width",0.5).style("fill",function(X,W){return v(W)});var x=T.style("opacity",0).transition().duration(750).delay(function(X,W){return W*50}).style("opacity",1);F.append("g").attr("class","d3-axis d3-axis-left d3-axis-solid").call(p.orient("left"));d3.select(F.selectAll(".d3-axis-left .tick text")[0][0]).style("visibility","hidden");F.append("g").attr("class","d3-axis d3-axis-right d3-axis-solid").attr("transform","translate("+I+", 0)").call(q.orient("right"));d3.select(F.selectAll(".d3-axis-right .tick text")[0][0]).style("visibility","hidden");var z=F.append("g").attr("class","d3-axis d3-axis-horizontal d3-axis-solid").attr("transform","translate(0,"+G+")").call(w);z.selectAll(".d3-axis-subticks").data(B.ticks(d3.time.hours),function(W){return W}).enter().append("line").attr("class","d3-axis-subticks").attr("y1",0).attr("y2",4).attr("x1",B).attr("x2",B);var y=V.append("g").attr("class","hover-line");var Q=y.append("line").attr("y1",0).attr("y2",G).style("fill","none").style("stroke","#fff").style("stroke-width",1).style("pointer-events","none").style("shape-rendering","crispEdges").style("opacity",0);var P=y.append("rect").attr("x",2).attr("y",2).attr("width",6).attr("height",6).style("fill","#03A9F4").style("stroke","#fff").style("stroke-width",1).style("shape-rendering","crispEdges").style("pointer-events","none").style("opacity",0);x.each("end",function(){T.on("mouseover",function(X,W){F.selectAll(".streamgraph-layer").transition().duration(250).style("opacity",function(Z,Y){return Y!=W?0.75:1})}).on("mousemove",function(aa,Y){mouse=d3.mouse(this);mousex=mouse[0];mousey=mouse[1];datearray=[];var W=B.invert(mousex);W=W.getHours();var Z=(aa.values);for(var X=0;X<Z.length;X++){datearray[X]=Z[X].date;datearray[X]=datearray[X].getHours()}mousedate=datearray.indexOf(W);pro=aa.values[mousedate].value;P.attr("x",mousex-3).attr("y",mousey-6).style("opacity",1);Q.attr("x1",mousex).attr("x2",mousex).style("opacity",1);t.html("<ul class='list-unstyled mb-5'><li><div class='text-size-base mt-5 mb-5'><i class='icon-circle-left2 position-left'></i>"+aa.key+"</div></li><li>Visits: &nbsp;<span class='text-semibold pull-right'>"+pro+"</span></li><li>Time: &nbsp; <span class='text-semibold pull-right'>"+D(aa.values[mousedate].date)+"</span></li></ul>").style("display","block");t.append("div").attr("class","d3-tip-arrow")}).on("mouseout",function(X,W){F.selectAll(".streamgraph-layer").transition().duration(250).style("opacity",1);P.style("opacity",0);t.style("display","none");Q.style("opacity",0)})});J.on("mousemove",function(X,W){mouse=d3.mouse(this);mousex=mouse[0];mousey=mouse[1];t.style("top",(mousey-($(".d3-tip").outerHeight()/2))-2+"px");if(mousex>=($(r).outerWidth()-$(".d3-tip").outerWidth()-E.right-(L*2))){t.style("left",(mousex-$(".d3-tip").outerWidth()-L)+"px").attr("class","d3-tip w")}else{t.style("left",(mousex+L)+"px").attr("class","d3-tip e")}})});$(window).on("resize",H);$(document).on("click",".sidebar-control",H);function H(){I=J.node().getBoundingClientRect().width-E.left-E.right;C.attr("width",I+E.left+E.right);F.attr("width",I+E.left+E.right);B.range([0,I]);F.selectAll(".d3-axis-horizontal").call(w);F.selectAll(".d3-axis-subticks").attr("x1",B).attr("x2",B);F.selectAll(".d3-grid-dashed").call(O.tickSize(-I,0,0));F.selectAll(".d3-axis-right").attr("transform","translate("+I+", 0)");F.selectAll(".streamgraph-layer").attr("d",function(x){return M(x.values)})}}e("#app_sales",255);function e(y,B){var t=d3.select(y),x={top:5,right:30,bottom:30,left:50},s=t.node().getBoundingClientRect().width-x.left-x.right,B=B-x.top-x.bottom;var E=d3.tip().attr("class","d3-tip").html(function(F){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mt-5 mb-5'><i class='icon-circle-left2 position-left'></i>"+F.name+" app</div></li><li>Sales: &nbsp;<span class='text-semibold pull-right'>"+F.value+"</span></li><li>Revenue: &nbsp; <span class='text-semibold pull-right'>$"+(F.value*25).toFixed(2)+"</span></li></ul>"});var r=d3.time.format("%Y/%m/%d").parse,D=d3.time.format("%b %d, '%y");var v=["#4CAF50","#FF5722","#5C6BC0"],w=d3.scale.ordinal().range(v);var q=t.append("svg");var z=q.attr("width",s+x.left+x.right).attr("height",B+x.top+x.bottom).append("g").attr("transform","translate("+x.left+","+x.top+")").call(E);var u=$("#select_date").multiselect({buttonClass:"btn btn-link text-semibold",enableHTML:true,dropRight:true,onChange:function(){A(),$.uniform.update()},buttonText:function(F,G){var H="";F.each(function(){H+=$(this).html()+", "});return'<span class="status-mark border-warning position-left"></span>'+H.substr(0,H.length-2)}});$(".multiselect-container input").uniform({radioClass:"choice"});d3.csv("assets/demo_data/dashboard/app_sales.csv",function(F,G){formatted=G;C()});var p;d3.select(window).on("keydown",function(){p=d3.event.altKey}).on("keyup",function(){p=false});function A(){d3.transition().duration(p?7500:500).each(C)}function C(){var M=d3.nest().key(function(T){return T.type}).map(formatted);var K=u.val();var J=M[K];w.domain(d3.keys(J[0]).filter(function(T){return(T!=="date"&&T!=="type")}));var P=w.domain().map(function(T){return{name:T,values:J.map(function(U){return{name:T,date:r(U.date),value:parseFloat(U[T],10)}})}});var S=d3.svg.line().x(function(T){return O(T.date)}).y(function(T){return N(T.value)}).interpolate("cardinal");var O=d3.time.scale().domain([d3.min(P,function(T){return d3.min(T.values,function(U){return U.date})}),d3.max(P,function(T){return d3.max(T.values,function(U){return U.date})})]).range([0,s]);var N=d3.scale.linear().domain([d3.min(P,function(T){return d3.min(T.values,function(U){return U.value})}),d3.max(P,function(T){return d3.max(T.values,function(U){return U.value})})]).range([B,0]);var G=d3.svg.axis().scale(O).orient("bottom").tickPadding(8).ticks(d3.time.days).innerTickSize(4).tickFormat(d3.time.format("%a"));var F=d3.svg.axis().scale(N).orient("left").ticks(6).tickSize(0-s).tickPadding(8);z.append("g").attr("class","d3-axis d3-axis-horizontal d3-axis-solid").attr("transform","translate(0,"+B+")");z.append("g").attr("class","d3-axis d3-axis-vertical d3-axis-transparent");var R=z.selectAll(".lines").data(P);var H=R.enter().append("g").attr("class","lines").attr("id",function(T){return T.name+"-line"});H.append("path").attr("class","d3-line d3-line-medium").style("stroke",function(T){return w(T.name)}).style("opacity",0).attr("d",function(T){return S(T.values[0])}).transition().duration(500).delay(function(U,T){return T*200}).style("opacity",1);var L=R.selectAll("circle").data(function(T){return T.values}).enter().append("circle").attr("class","d3-line-circle d3-line-circle-medium").attr("cx",function(U,T){return O(U.date)}).attr("cy",function(U,T){return N(U.value)}).attr("r",3).style("fill","#fff").style("stroke",function(T){return w(T.name)});L.style("opacity",0).transition().duration(500).delay(500).style("opacity",1);L.on("mouseover",function(T){E.offset([-15,0]).show(T);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(T){E.hide(T);d3.select(this).transition().duration(250).attr("r",3)});R.each(function(T){d3.select(d3.select(this).selectAll("circle")[0][0]).on("mouseover",function(U){E.offset([0,15]).direction("e").show(U);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(U){E.direction("n").hide(U);d3.select(this).transition().duration(250).attr("r",3)})});R.each(function(T){d3.select(d3.select(this).selectAll("circle")[0][d3.select(this).selectAll("circle").size()-1]).on("mouseover",function(U){E.offset([0,-15]).direction("w").show(U);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(U){E.direction("n").hide(U);d3.select(this).transition().duration(250).attr("r",3)})});var I=d3.transition(R);I.select("path").attr("d",function(U,T){return S(U.values)});I.selectAll("circle").attr("cy",function(U,T){return N(U.value)}).attr("cx",function(U,T){return O(U.date)});d3.transition(z).select(".d3-axis-vertical").call(F);d3.transition(z).select(".d3-axis-horizontal").attr("transform","translate(0,"+B+")").call(G);$(window).on("resize",Q);$(document).on("click",".sidebar-control",Q);function Q(){s=t.node().getBoundingClientRect().width-x.left-x.right;q.attr("width",s+x.left+x.right);z.attr("width",s+x.left+x.right);O.range([0,s]);N.range([B,0]);z.select(".d3-axis-horizontal").call(G);z.select(".d3-axis-vertical").call(F.tickSize(0-s));z.selectAll(".d3-line").attr("d",function(U,T){return S(U.values)});z.selectAll(".d3-line-circle").attr("cx",function(U,T){return O(U.date)})}}}f();function f(){d3.csv("assets/demo_data/dashboard/app_sales_heatmap.csv",function(B,J){var t=d3.nest().key(function(x){return x.app}),H=t.entries(J);var D=d3.time.format("%Y/%m/%d %H:%M"),I=d3.time.format("%H:%M");J.forEach(function(y,x){y.date=D.parse(y.date),y.value=+y.value});var C=d3.select("#sales-heatmap");margin={top:20,right:0,bottom:30,left:0},width=C.node().getBoundingClientRect().width-margin.left-margin.right,gridSize=width/new Date(J[J.length-1].date).getHours(),rowGap=40,height=(rowGap+gridSize)*(d3.max(H,function(y,x){return x+1}))-margin.top,buckets=5,colors=["#DCEDC8","#C5E1A5","#9CCC65","#7CB342","#558B2F"];var s=d3.time.scale().range([0,width]);var r=d3.scale.linear().range([height,0]);var F=d3.scale.quantile().domain([0,buckets-1,d3.max(J,function(x){return x.value})]).range(colors);s.domain([new Date(J[0].date),d3.time.hour.offset(new Date(J[J.length-1].date),1)]);r.domain([0,d3.max(J,function(x){return x.app})]);var v=C.append("svg");var A=v.attr("width",width+margin.left+margin.right).attr("height",height+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");var w=A.selectAll(".hour-group").data(H).enter().append("g").attr("class","hour-group").attr("transform",function(y,x){return"translate(0, "+((gridSize+rowGap)*x)+")"});w.append("text").attr("class","app-label").attr("x",0).attr("y",-(margin.top/2)).text(function(y,x){return y.key});w.append("text").attr("class","sales-count").attr("x",width).attr("y",-(margin.top/2)).style("text-anchor","end").text(function(y,x){return d3.sum(y.values,function(K){return K.value})+" sales today"});var u=w.selectAll(".heatmap-hour").data(function(x){return x.values}).enter().append("rect").attr("x",function(y,x){return s(y.date)}).attr("y",0).attr("class","heatmap-hour").attr("width",gridSize).attr("height",gridSize).style("fill","#fff").style("stroke","#fff").style("cursor","pointer").style("shape-rendering","crispEdges");u.transition().duration(250).delay(function(y,x){return x*20}).style("fill",function(x){return F(x.value)});w.each(function(x){u.on("mouseover",function(K,y){d3.select(this).style("opacity",0.75);d3.select(this.parentNode).select(".sales-count").text(function(L){return L.values[y].value+" sales at "+I(L.values[y].date)})}).on("mouseout",function(K,y){d3.select(this).style("opacity",1);d3.select(this.parentNode).select(".sales-count").text(function(M,L){return d3.sum(M.values,function(N){return N.value})+" sales today"})})});var z,E;J.forEach(function(y,x){E=d3.max(J,function(K){return K.value});z=d3.min(J,function(K){return K.value})});var q=A.append("g").attr("class","legend-group").attr("width",width).attr("transform","translate("+((width/2)-((buckets*gridSize))/2)+","+(height+(margin.bottom-margin.top))+")");var p=q.selectAll(".heatmap-legend").data([0].concat(F.quantiles()),function(x){return x}).enter().append("g").attr("class","heatmap-legend");p.append("rect").attr("class","heatmap-legend-item").attr("x",function(y,x){return gridSize*x}).attr("y",-8).attr("width",gridSize).attr("height",5).style("stroke","#fff").style("shape-rendering","crispEdges").style("fill",function(y,x){return colors[x]});q.append("text").attr("class","min-legend-value").attr("x",-10).attr("y",-2).style("text-anchor","end").style("font-size",11).style("fill","#999").text(z);q.append("text").attr("class","max-legend-value").attr("x",(buckets*gridSize)+10).attr("y",-2).style("font-size",11).style("fill","#999").text(E);$(window).on("resize",G);$(document).on("click",".sidebar-control",G);function G(){width=C.node().getBoundingClientRect().width-margin.left-margin.right,gridSize=width/new Date(J[J.length-1].date).getHours(),height=(rowGap+gridSize)*(d3.max(H,function(y,x){return x+1}))-margin.top,v.attr("width",width+margin.left+margin.right).attr("height",height+margin.bottom);A.attr("width",width+margin.left+margin.right).attr("height",height+margin.bottom);s.range([0,width]);A.selectAll(".hour-group").attr("transform",function(y,x){return"translate(0, "+((gridSize+rowGap)*x)+")"});A.selectAll(".heatmap-hour").attr("width",gridSize).attr("height",gridSize).attr("x",function(y,x){return s(y.date)});A.selectAll(".legend-group").attr("transform","translate("+((width/2)-((buckets*gridSize))/2)+","+(height+margin.bottom-margin.top)+")");A.selectAll(".sales-count").attr("x",width);A.selectAll(".heatmap-legend-item").attr("width",gridSize).attr("x",function(y,x){return gridSize*x});A.selectAll(".max-legend-value").attr("x",(buckets*gridSize)+10)}})}j("#monthly-sales-stats",100,"#4DB6AC");function j(z,E,w){var t=d3.select(z),v={top:20,right:35,bottom:40,left:35},s=t.node().getBoundingClientRect().width-v.left-v.right,E=E-v.top-v.bottom;var q=d3.time.format("%Y-%m-%d").parse,D=d3.bisector(function(x){return x.date}).left,F=d3.time.format("%b %d");var p=t.append("svg");var A=p.attr("width",s+v.left+v.right).attr("height",E+v.top+v.bottom).append("g").attr("transform","translate("+v.left+","+v.top+")");var r=d3.svg.area().x(function(x){return C(x.date)}).y0(E).y1(function(x){return B(x.value)}).interpolate("monotone");var C=d3.time.scale().range([0,s]);var B=d3.scale.linear().range([E,0]);var u=d3.svg.axis().scale(C).orient("bottom").ticks(d3.time.days,6).innerTickSize(4).tickPadding(8).tickFormat(d3.time.format("%b %d"));d3.json("assets/demo_data/dashboard/monthly_sales.json",function(L,H){if(L){return console.error(L)}H.forEach(function(O){O.date=q(O.date);O.value=+O.value});var x=d3.max(H,function(O){return O.value});var G=H.map(function(O){return{date:O.date,value:0}});C.domain(d3.extent(H,function(P,O){return P.date}));B.domain([0,d3.max(H,function(O){return O.value})]);var M=A.append("g").attr("class","d3-axis d3-axis-horizontal d3-axis-solid").attr("transform","translate(0,"+E+")").call(u);M.selectAll(".d3-axis-subticks").data(C.ticks(d3.time.days),function(O){return O}).enter().append("line").attr("class","d3-axis-subticks").attr("y1",0).attr("y2",4).attr("x1",C).attr("x2",C);A.append("path").datum(H).attr("class","d3-area").attr("d",r).style("fill",w).transition().duration(1000).attrTween("d",function(){var O=d3.interpolateArray(G,H);return function(P){return r(O(P))}});var y=A.append("g").attr("class","d3-crosshair-line").style("display","none");y.append("line").attr("class","vertical-crosshair").attr("y1",0).attr("y2",-x).style("stroke","#e5e5e5").style("shape-rendering","crispEdges");var K=A.append("g").attr("class","d3-crosshair-pointer").style("display","none");K.append("circle").attr("r",3).style("fill","#fff").style("stroke",w).style("stroke-width",1);var N=A.append("g").attr("class","d3-crosshair-text").style("display","none");N.append("text").attr("dy",-10).style("font-size",12);A.append("rect").attr("class","d3-crosshair-overlay").style("fill","none").style("pointer-events","all").attr("width",s).attr("height",E).on("mouseover",function(){K.style("display",null);y.style("display",null);N.style("display",null)}).on("mouseout",function(){K.style("display","none");y.style("display","none");N.style("display","none")}).on("mousemove",J);function J(){var O=d3.mouse(this),S=O[0],R=O[1],Q=C.invert(S),P=D(H,Q),U=H[P-1],T=H[P],V=Q-U.date>T.date-Q?T:U;y.attr("transform","translate("+C(V.date)+","+E+")");K.attr("transform","translate("+C(V.date)+","+B(V.value)+")");if(S>=(t.node().getBoundingClientRect().width-N.select("text").node().getBoundingClientRect().width-v.right-v.left)){N.select("text").attr("text-anchor","end").attr("x",function(){return(C(V.date)-15)+"px"}).text(F(V.date)+" - "+V.value+" sales")}else{N.select("text").attr("text-anchor","start").attr("x",function(){return(C(V.date)+15)+"px"}).text(F(V.date)+" - "+V.value+" sales")}}$(window).on("resize",I);$(document).on("click",".sidebar-control",I);function I(){s=t.node().getBoundingClientRect().width-v.left-v.right;p.attr("width",s+v.left+v.right);A.attr("width",s+v.left+v.right);C.range([0,s]);A.selectAll(".d3-axis-horizontal").call(u);A.selectAll(".d3-axis-subticks").attr("x1",C).attr("x2",C);A.selectAll(".d3-area").datum(H).attr("d",r);A.selectAll(".d3-crosshair-overlay").attr("width",s)}})}o("#messages-stats",40,"#5C6BC0");function o(w,C,v){var t=d3.select(w),u={top:0,right:0,bottom:0,left:0},s=t.node().getBoundingClientRect().width-u.left-u.right,C=C-u.top-u.bottom;var p=d3.time.format("%Y-%m-%d").parse;var q=t.append("svg");var z=q.attr("width",s+u.left+u.right).attr("height",C+u.top+u.bottom).append("g").attr("transform","translate("+u.left+","+u.top+")");var r=d3.svg.area().x(function(x){return B(x.date)}).y0(C).y1(function(x){return A(x.value)}).interpolate("monotone");var B=d3.time.scale().range([0,s]);var A=d3.scale.linear().range([C,0]);d3.json("assets/demo_data/dashboard/monthly_sales.json",function(x,F){if(x){return console.error(x)}F.forEach(function(G){G.date=p(G.date);G.value=+G.value});var E=d3.max(F,function(G){return G.value});var D=F.map(function(G){return{date:G.date,value:0}});B.domain(d3.extent(F,function(H,G){return H.date}));A.domain([0,d3.max(F,function(G){return G.value})]);z.append("path").datum(F).attr("class","d3-area").style("fill",v).attr("d",r).transition().duration(1000).attrTween("d",function(){var G=d3.interpolateArray(D,F);return function(H){return r(G(H))}});$(window).on("resize",y);$(document).on("click",".sidebar-control",y);function y(){s=t.node().getBoundingClientRect().width-u.left-u.right;q.attr("width",s+u.left+u.right);z.attr("width",s+u.left+u.right);B.range([0,s]);z.selectAll(".d3-area").datum(F).attr("d",r)}})}n("#new-visitors","line",30,35,"basis",750,2000,"#26A69A");n("#new-sessions","line",30,35,"basis",750,2000,"#FF7043");n("#total-online","line",30,35,"basis",750,2000,"#5C6BC0");n("#server-load","area",30,50,"basis",750,2000,"rgba(255,255,255,0.5)");function n(q,r,t,E,A,p,M,H){var I=d3.select(q),C={top:0,right:0,bottom:0,left:0},G=I.node().getBoundingClientRect().width-C.left-C.right,E=E-C.top-C.bottom;var O=[];for(var J=0;J<t;J++){O.push(Math.floor(Math.random()*t)+5)}var v=d3.scale.linear().range([0,G]);var u=d3.scale.linear().range([E-5,5]);v.domain([1,t-3]);u.domain([0,t]);var w=d3.svg.line().interpolate(A).x(function(y,x){return v(x)}).y(function(y,x){return u(y)});var K=d3.svg.area().interpolate(A).x(function(y,x){return v(x)}).y0(E).y1(function(x){return u(x)});var z=I.append("svg");var D=z.attr("width",G+C.left+C.right).attr("height",E+C.top+C.bottom).append("g").attr("transform","translate("+C.left+","+C.top+")");var L=D.append("defs").append("clipPath").attr("id",function(y,x){return"load-clip-"+q.substring(1)});var N=L.append("rect").attr("class","load-clip").attr("width",0).attr("height",E);N.transition().duration(1000).ease("linear").attr("width",G);var F=D.append("g").attr("clip-path",function(y,x){return"url(#load-clip-"+q.substring(1)+")"}).append("path").datum(O).attr("transform","translate("+v(0)+",0)");if(r=="area"){F.attr("d",K).attr("class","d3-area").style("fill",H)}else{F.attr("d",w).attr("class","d3-line d3-line-medium").style("stroke",H)}F.style("opacity",0).transition().duration(750).style("opacity",1);setInterval(function(){O.push(Math.floor(Math.random()*t)+5);O.shift();s()},M);function s(){F.attr("transform",null).transition().duration(p).ease("linear").attr("transform","translate("+v(0)+",0)");if(r=="area"){F.attr("d",K).attr("class","d3-area").style("fill",H)}else{F.attr("d",w).attr("class","d3-line d3-line-medium").style("stroke",H)}}$(window).on("resize",B);$(document).on("click",".sidebar-control",B);function B(){G=I.node().getBoundingClientRect().width-C.left-C.right;z.attr("width",G+C.left+C.right);D.attr("width",G+C.left+C.right);v.range([0,G]);N.attr("width",G);D.select(".d3-line").attr("d",w);D.select(".d3-area").attr("d",K)}}m("#today-revenue",50);function m(p,C){var u=[{date:"04/13/14",alpha:"60"},{date:"04/14/14",alpha:"35"},{date:"04/15/14",alpha:"65"},{date:"04/16/14",alpha:"50"},{date:"04/17/14",alpha:"65"},{date:"04/18/14",alpha:"20"},{date:"04/19/14",alpha:"60"}];var H=d3.select(p),B={top:0,right:0,bottom:0,left:0},F=H.node().getBoundingClientRect().width-B.left-B.right,C=C-B.top-B.bottom,A=20;var L=d3.time.format("%m/%d/%y").parse,z=d3.time.format("%a, %B %e");var r=d3.tip().attr("class","d3-tip").html(function(x){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mt-5 mb-5'><i class='icon-check2 position-left'></i>"+z(x.date)+"</div></li><li>Sales: &nbsp;<span class='text-semibold pull-right'>"+x.alpha+"</span></li><li>Revenue: &nbsp; <span class='text-semibold pull-right'>$"+(x.alpha*25).toFixed(2)+"</span></li></ul>"});var w=H.append("svg");var D=w.attr("width",F+B.left+B.right).attr("height",C+B.top+B.bottom).append("g").attr("transform","translate("+B.left+","+B.top+")").call(r);u.forEach(function(x){x.date=L(x.date);x.alpha=+x.alpha});var t=d3.time.scale().range([A,F-A]);var s=d3.scale.linear().range([C,5]);t.domain(d3.extent(u,function(x){return x.date}));s.domain([0,d3.max(u,function(x){return Math.max(x.alpha)})]);var v=d3.svg.line().x(function(x){return t(x.date)}).y(function(x){return s(x.alpha)});var J=D.append("defs").append("clipPath").attr("id","clip-line-small");var G=J.append("rect").attr("class","clip").attr("width",0).attr("height",C);G.transition().duration(1000).ease("linear").attr("width",F);var E=D.append("path").attr({d:v(u),"clip-path":"url(#clip-line-small)","class":"d3-line d3-line-medium"}).style("stroke","#fff");D.select(".line-tickets").transition().duration(1000).ease("linear");var K=D.append("g").selectAll(".d3-line-guides-group").data(u);K.enter().append("line").attr("class","d3-line-guides").attr("x1",function(y,x){return t(y.date)}).attr("y1",function(y,x){return C}).attr("x2",function(y,x){return t(y.date)}).attr("y2",function(y,x){return C}).style("stroke","rgba(255,255,255,0.3)").style("stroke-dasharray","4,2").style("shape-rendering","crispEdges");K.transition().duration(1000).delay(function(y,x){return x*150}).attr("y2",function(y,x){return s(y.alpha)});var I=D.insert("g").selectAll(".d3-line-circle").data(u).enter().append("circle").attr("class","d3-line-circle d3-line-circle-medium").attr("cx",v.x()).attr("cy",v.y()).attr("r",3).style("stroke","#fff").style("fill","#29B6F6");I.style("opacity",0).transition().duration(250).ease("linear").delay(1000).style("opacity",1);I.on("mouseover",function(x){r.offset([-10,0]).show(x);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(x){r.hide(x);d3.select(this).transition().duration(250).attr("r",3)});d3.select(I[0][0]).on("mouseover",function(x){r.offset([0,10]).direction("e").show(x);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(x){r.direction("n").hide(x);d3.select(this).transition().duration(250).attr("r",3)});d3.select(I[0][I.size()-1]).on("mouseover",function(x){r.offset([0,-10]).direction("w").show(x);d3.select(this).transition().duration(250).attr("r",4)}).on("mouseout",function(x){r.direction("n").hide(x);d3.select(this).transition().duration(250).attr("r",3)});$(window).on("resize",q);$(document).on("click",".sidebar-control",q);function q(){F=H.node().getBoundingClientRect().width-B.left-B.right;w.attr("width",F+B.left+B.right);D.attr("width",F+B.left+B.right);t.range([A,F-A]);G.attr("width",F);D.selectAll(".d3-line").attr("d",v(u));D.selectAll(".d3-line-circle").attr("cx",v.x());D.selectAll(".d3-line-guides").attr("x1",function(y,x){return t(y.date)}).attr("x2",function(y,x){return t(y.date)})}}k("#today-progress",20,20,"#7986CB");k("#yesterday-progress",20,20,"#7986CB");function k(x,s,E,w){var t=d3.select(x),v=2,A=Math.min(s/2,E/2)-v,B=2*Math.PI,p=$(x).data("progress"),D=100;var r=d3.svg.arc().startAngle(0).innerRadius(0).outerRadius(A).endAngle(function(F){return(F.value/F.size)*2*Math.PI});var q=t.append("svg");var y=q.attr("width",s).attr("height",E).append("g").attr("transform","translate("+s/2+","+E/2+")");var u=y.append("g").attr("class","progress-meter");u.append("path").attr("d",r.endAngle(B)).style("fill","#fff").style("stroke",w).style("stroke-width",1.5);var C=u.append("path").style("fill",w);C.transition().ease("cubic-out").duration(2500).attrTween("d",z);function z(){var F=d3.interpolate(0,p);return function(H){var I=p/(100/H);var G=r.endAngle(B*(I));return r(F(G))}}}d("#campaigns-donut",42);function d(w,C){var v=[{browser:"Google Adwords",icon:"<i class='icon-google position-left'></i>",value:1047,color:"#66BB6A"},{browser:"Social media",icon:"<i class='icon-share4 position-left'></i>",value:2948,color:"#9575CD"},{browser:"Youtube video",icon:"<i class='icon-youtube position-left'></i>",value:3909,color:"#FF7043"}];var s=d3.select(w),q=2,A=(C/2)-q,z=d3.sum(v,function(D){return D.value});var B=d3.tip().attr("class","d3-tip").offset([-10,0]).direction("e").html(function(D){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mb-5 mt-5'>"+D.data.icon+D.data.browser+"</div></li><li>Visits: &nbsp;<span class='text-semibold pull-right'>"+D.value+"</span></li><li>Share: &nbsp;<span class='text-semibold pull-right'>"+(100/(z/D.value)).toFixed(2)+"%</span></li></ul>"});var p=s.append("svg").call(B);var x=p.attr("width",C).attr("height",C).append("g").attr("transform","translate("+(C/2)+","+(C/2)+")");var u=d3.layout.pie().sort(null).startAngle(Math.PI).endAngle(3*Math.PI).value(function(D){return D.value});var r=d3.svg.arc().outerRadius(A).innerRadius(A/2);var y=x.selectAll(".d3-arc").data(u(v)).enter().append("g").attr("class","d3-arc").style("stroke","#fff").style("cursor","pointer");var t=y.append("path").style("fill",function(D){return D.data.color});t.on("mouseover",function(E,D){d3.select(this).transition().duration(500).ease("elastic").attr("transform",function(G){G.midAngle=((G.endAngle-G.startAngle)/2)+G.startAngle;var F=Math.sin(G.midAngle)*q;var H=-Math.cos(G.midAngle)*q;return"translate("+F+","+H+")"})}).on("mousemove",function(D){B.show(D).style("top",(d3.event.pageY-40)+"px").style("left",(d3.event.pageX+30)+"px")}).on("mouseout",function(E,D){d3.select(this).transition().duration(500).ease("bounce").attr("transform","translate(0,0)");B.hide(E)});t.transition().delay(function(E,D){return D*500}).duration(500).attrTween("d",function(E){var D=d3.interpolate(E.startAngle,E.endAngle);return function(F){E.endAngle=D(F);return r(E)}})}b("#campaign-status-pie",42);function b(w,C){var v=[{status:"Active campaigns",icon:"<span class='status-mark border-blue-300 position-left'></span>",value:439,color:"#29B6F6"},{status:"Closed campaigns",icon:"<span class='status-mark border-danger-300 position-left'></span>",value:290,color:"#EF5350"},{status:"Pending campaigns",icon:"<span class='status-mark border-success-300 position-left'></span>",value:190,color:"#81C784"},{status:"Campaigns on hold",icon:"<span class='status-mark border-grey-300 position-left'></span>",value:148,color:"#999"}];var s=d3.select(w),q=2,A=(C/2)-q,z=d3.sum(v,function(D){return D.value});var B=d3.tip().attr("class","d3-tip").offset([-10,0]).direction("e").html(function(D){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mb-5 mt-5'>"+D.data.icon+D.data.status+"</div></li><li>Total: &nbsp;<span class='text-semibold pull-right'>"+D.value+"</span></li><li>Share: &nbsp;<span class='text-semibold pull-right'>"+(100/(z/D.value)).toFixed(2)+"%</span></li></ul>"});var p=s.append("svg").call(B);var x=p.attr("width",C).attr("height",C).append("g").attr("transform","translate("+(C/2)+","+(C/2)+")");var u=d3.layout.pie().sort(null).startAngle(Math.PI).endAngle(3*Math.PI).value(function(D){return D.value});var r=d3.svg.arc().outerRadius(A).innerRadius(A/2);var y=x.selectAll(".d3-arc").data(u(v)).enter().append("g").attr("class","d3-arc").style("stroke","#fff").style("cursor","pointer");var t=y.append("path").style("fill",function(D){return D.data.color});t.on("mouseover",function(E,D){d3.select(this).transition().duration(500).ease("elastic").attr("transform",function(G){G.midAngle=((G.endAngle-G.startAngle)/2)+G.startAngle;var F=Math.sin(G.midAngle)*q;var H=-Math.cos(G.midAngle)*q;return"translate("+F+","+H+")"})}).on("mousemove",function(D){B.show(D).style("top",(d3.event.pageY-40)+"px").style("left",(d3.event.pageX+30)+"px")}).on("mouseout",function(E,D){d3.select(this).transition().duration(500).ease("bounce").attr("transform","translate(0,0)");B.hide(E)});t.transition().delay(function(E,D){return D*500}).duration(500).attrTween("d",function(E){var D=d3.interpolate(E.startAngle,E.endAngle);return function(F){E.endAngle=D(F);return r(E)}})}c("#tickets-status",42);function c(w,C){var v=[{status:"Pending tickets",icon:"<i class='status-mark border-blue-300 position-left'></i>",value:295,color:"#29B6F6"},{status:"Resolved tickets",icon:"<i class='status-mark border-success-300 position-left'></i>",value:189,color:"#66BB6A"},{status:"Closed tickets",icon:"<i class='status-mark border-danger-300 position-left'></i>",value:277,color:"#EF5350"}];var s=d3.select(w),q=2,A=(C/2)-q,z=d3.sum(v,function(D){return D.value});var B=d3.tip().attr("class","d3-tip").offset([-10,0]).direction("e").html(function(D){return"<ul class='list-unstyled mb-5'><li><div class='text-size-base mb-5 mt-5'>"+D.data.icon+D.data.status+"</div></li><li>Total: &nbsp;<span class='text-semibold pull-right'>"+D.value+"</span></li><li>Share: &nbsp;<span class='text-semibold pull-right'>"+(100/(z/D.value)).toFixed(2)+"%</span></li></ul>"});var p=s.append("svg").call(B);var x=p.attr("width",C).attr("height",C).append("g").attr("transform","translate("+(C/2)+","+(C/2)+")");var u=d3.layout.pie().sort(null).startAngle(Math.PI).endAngle(3*Math.PI).value(function(D){return D.value});var r=d3.svg.arc().outerRadius(A).innerRadius(A/2);var y=x.selectAll(".d3-arc").data(u(v)).enter().append("g").attr("class","d3-arc").style("stroke","#fff").style("cursor","pointer");var t=y.append("path").style("fill",function(D){return D.data.color});t.on("mouseover",function(E,D){d3.select(this).transition().duration(500).ease("elastic").attr("transform",function(G){G.midAngle=((G.endAngle-G.startAngle)/2)+G.startAngle;var F=Math.sin(G.midAngle)*q;var H=-Math.cos(G.midAngle)*q;return"translate("+F+","+H+")"})}).on("mousemove",function(D){B.show(D).style("top",(d3.event.pageY-40)+"px").style("left",(d3.event.pageX+30)+"px")}).on("mouseout",function(E,D){d3.select(this).transition().duration(500).ease("bounce").attr("transform","translate(0,0)");B.hide(E)});t.transition().delay(function(E,D){return D*500}).duration(500).attrTween("d",function(E){var D=d3.interpolate(E.startAngle,E.endAngle);return function(F){E.endAngle=D(F);return r(E)}})}a("#hours-available-bars",24,40,true,"elastic",1200,50,"#EC407A","hours");a("#goal-bars",24,40,true,"elastic",1200,50,"#5C6BC0","goal");a("#members-online",24,50,true,"elastic",1200,50,"rgba(255,255,255,0.5)","members");function a(s,z,C,u,F,p,M,H,t){var K=[];for(var J=0;J<z;J++){K.push(Math.round(Math.random()*10)+10)}var I=d3.select(s),G=I.node().getBoundingClientRect().width;var w=d3.scale.ordinal().rangeBands([0,G],0.3);var v=d3.scale.linear().range([0,C]);w.domain(d3.range(0,K.length));v.domain([0,d3.max(K)]);var A=I.append("svg");var D=A.attr("width",G).attr("height",C).append("g");var E=D.selectAll("rect").data(K).enter().append("rect").attr("class","d3-random-bars").attr("width",w.rangeBand()).attr("x",function(y,x){return w(x)}).style("fill",H);var B=d3.tip().attr("class","d3-tip").offset([-10,0]);if(t=="hours"||t=="goal"||t=="members"){E.call(B).on("mouseover",B.show).on("mouseout",B.hide)}if(t=="hours"){B.html(function(y,x){return"<div class='text-center'><h6 class='no-margin'>"+y+"</h6><span class='text-size-small'>meetings</span><div class='text-size-small'>"+x+":00</div></div>"})}if(t=="goal"){B.html(function(y,x){return"<div class='text-center'><h6 class='no-margin'>"+y+"</h6><span class='text-size-small'>statements</span><div class='text-size-small'>"+x+":00</div></div>"})}if(t=="members"){B.html(function(y,x){return"<div class='text-center'><h6 class='no-margin'>"+y+"0</h6><span class='text-size-small'>members</span><div class='text-size-small'>"+x+":00</div></div>"})}if(u){L()}else{q()}function L(){E.attr("height",0).attr("y",C).transition().attr("height",function(x){return v(x)}).attr("y",function(x){return C-v(x)}).delay(function(y,x){return x*M}).duration(p).ease(F)}function q(){E.attr("height",function(x){return v(x)}).attr("y",function(x){return C-v(x)})}$(window).on("resize",r);$(document).on("click",".sidebar-control",r);function r(){G=I.node().getBoundingClientRect().width;A.attr("width",G);D.attr("width",G);w.rangeBands([0,G],0.3);D.selectAll(".d3-random-bars").attr("width",w.rangeBand()).attr("x",function(y,x){return w(x)})}}l("#hours-available-progress",38,2,"#F06292",0.68,"icon-watch text-pink-400","Hours available","64% average");l("#goal-progress",38,2,"#5C6BC0",0.82,"icon-trophy3 text-indigo-400","Productivity goal","87% average");function l(r,t,I,J,s,p,D,A){var K=d3.select(r),O=0,N=32,x=s,H=Math.PI*2,L=d3.format(".0%"),G=t*2;var z=Math.abs((x-O)/0.01);var y=x<O?-0.01:0.01;var E=K.append("svg");var F=E.attr("width",G).attr("height",G).append("g").attr("transform","translate("+(G/2)+","+(G/2)+")");var B=d3.svg.arc().startAngle(0).innerRadius(t).outerRadius(t-I);F.append("path").attr("class","d3-progress-background").attr("d",B.endAngle(H)).style("fill","#eee");var q=F.append("path").attr("class","d3-progress-foreground").attr("filter","url(#blur)").style("fill",J).style("stroke",J);var w=F.append("path").attr("class","d3-progress-front").style("fill",J).style("fill-opacity",1);var M=d3.select(r).append("h2").attr("class","mt-15 mb-5");d3.select(r).append("i").attr("class",p+" counter-icon").attr("style","top: "+((G-N)/2)+"px");d3.select(r).append("div").text(D);d3.select(r).append("div").attr("class","text-size-small text-muted").text(A);function C(P){q.attr("d",B.endAngle(H*P));w.attr("d",B.endAngle(H*P));M.text(L(P))}var v=O;(function u(){C(v);if(z>0){z--;v+=y;setTimeout(u,10)}})()}i("#bullets",80);function i(u,x){w();function w(){d3.bullet=function(){var J="left",K=false,H=750,F=C,I=B,E=A,L=30,G=null;function D(M){M.each(function(ad,X){var ae=F.call(this,ad,X).slice().sort(d3.descending),V=I.call(this,ad,X).slice().sort(d3.descending),R=E.call(this,ad,X).slice().sort(d3.descending),aa=d3.select(this);var ab=d3.scale.linear().domain([0,Math.max(ae[0],V[0],R[0])]).range(K?[q,0]:[0,q]);var ac=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(ab.range());this.__chart__=ab;var S=z(ac),Q=z(ab);var T=aa.selectAll(".bullet-range").data(ae);T.enter().append("rect").attr("class",function(ag,af){return"bullet-range bullet-range-"+(af+1)}).attr("width",S).attr("height",L).attr("rx",2).attr("x",K?ac:0).transition().duration(H).attr("width",Q).attr("x",K?ab:0);T.transition().duration(H).attr("x",K?ab:0).attr("width",Q).attr("height",L);var N=aa.selectAll(".bullet-measure").data(R);N.enter().append("rect").attr("class",function(ag,af){return"bullet-measure bullet-measure-"+(af+1)}).attr("width",S).attr("height",L/5).attr("x",K?ac:0).attr("y",L/2.5).style("shape-rendering","crispEdges");N.transition().duration(H).attr("width",Q).attr("x",K?ab:0);N.transition().duration(H).attr("width",Q).attr("height",L/5).attr("x",K?ab:0).attr("y",L/2.5);var P=aa.selectAll(".bullet-marker").data(V);P.enter().append("line").attr("class",function(ag,af){return"bullet-marker bullet-marker-"+(af+1)}).attr("x1",ac).attr("x2",ac).attr("y1",L/6).attr("y2",L*5/6);P.transition().duration(H).attr("x1",ab).attr("x2",ab);P.transition().duration(H).attr("x1",ab).attr("x2",ab).attr("y1",L/6).attr("y2",L*5/6);var Y=G||ab.tickFormat(8);var Z=aa.selectAll(".bullet-tick").data(ab.ticks(8),function(af){return this.textContent||Y(af)});var U=Z.enter().append("g").attr("class","bullet-tick").attr("transform",y(ac)).style("opacity",0.000001);U.append("line").attr("y1",L).attr("y2",(L*7/6)+3);U.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",(L*7/6)+4).text(Y);U.transition().duration(H).attr("transform",y(ab)).style("opacity",1);var O=Z.transition().duration(H).attr("transform",y(ab)).style("opacity",1);O.select("line").attr("y1",L+3).attr("y2",(L*7/6)+3);O.select("text").attr("y",(L*7/6)+4);Z.exit().transition().duration(H).attr("transform",y(ab)).style("opacity",0.000001).remove();$(window).on("resize",W);$(document).on("click",".sidebar-control",W);function W(){q=d3.select("#bullets").node().getBoundingClientRect().width-t.left-t.right;Q=z(ab);ab.range(K?[q,0]:[0,q]);aa.selectAll(".bullet-measure").attr("width",Q).attr("x",K?ab:0);aa.selectAll(".bullet-range").attr("width",Q).attr("x",K?ab:0);aa.selectAll(".bullet-marker").attr("x1",ab).attr("x2",ab);aa.selectAll(".bullet-tick").attr("transform",y(ab))}});d3.timer.flush()}D.orient=function(M){if(!arguments.length){return J}J=M;K=J=="right"||J=="bottom";return D};D.ranges=function(M){if(!arguments.length){return F}F=M;return D};D.markers=function(M){if(!arguments.length){return I}I=M;return D};D.measures=function(M){if(!arguments.length){return E}E=M;return D};D.width=function(M){if(!arguments.length){return q}q=M;return D};D.height=function(M){if(!arguments.length){return L}L=M;return D};D.tickFormat=function(M){if(!arguments.length){return G}G=M;return D};D.duration=function(M){if(!arguments.length){return H}H=M;return D};return D};function C(D){return D.ranges}function B(D){return D.markers}function A(D){return D.measures}function y(D){return function(E){return"translate("+D(E)+",0)"}}function z(D){var E=D(0);return function(F){return Math.abs(D(F)-E)}}}var s=d3.select(u),t={top:20,right:10,bottom:35,left:10},q=q=s.node().getBoundingClientRect().width-t.left-t.right,x=x-t.top-t.bottom;var v=d3.bullet().width(q).height(x);d3.json("assets/demo_data/dashboard/bullets.json",function(F,D){if(F){return console.error(F)}var y=s.selectAll("svg").data(D).enter().append("svg");var E=y.attr("class",function(J,I){return"bullet-"+(I+1)}).attr("width",q+t.left+t.right).attr("height",x+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")").call(v);var G=E.append("g").style("text-anchor","start");G.append("text").attr("class","bullet-title").attr("y",-10).text(function(I){return I.title});G.append("text").attr("class","bullet-subtitle").attr("x",q).attr("y",-10).style("text-anchor","end").text(function(I){return I.subtitle}).style("opacity",0).transition().duration(500).delay(500).style("opacity",1);var A=function(){E.datum(r).call(v.duration(750))};var B=[];B.push(setInterval(function(){A()},5000));var H=document.querySelector(".switcher");var z=new Switchery(H);H.onchange=function(){if(H.checked){B.push(setInterval(function(){A()},5000))}else{for(var I=0;I<B.length;I++){clearInterval(B[I])}}};$(window).on("resize",C);$(document).on("click",".sidebar-control",C);function C(){q=s.node().getBoundingClientRect().width-t.left-t.right;y.attr("width",q+t.left+t.right);E.attr("width",q+t.left+t.right);E.selectAll(".bullet-subtitle").attr("x",q)}});function r(y){if(!y.randomizer){y.randomizer=p(y)}y.ranges=y.ranges.map(y.randomizer);y.markers=y.markers.map(y.randomizer);y.measures=y.measures.map(y.randomizer);return y}function p(z){var y=d3.max(z.ranges)*0.2;return function(A){return Math.max(0,A+y*(Math.random()-0.5))}}}$(".table tr").each(function(q){var s=$(this).find(".letter-icon-title"),r=s.eq(0).text().charAt(0).toUpperCase();var p=$(this).find(".letter-icon");p.eq(0).text(r)})});